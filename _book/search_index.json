{"index":{"version":"0.5.12","fields":[{"name":"title","boost":10},{"name":"keywords","boost":15},{"name":"body","boost":1}],"ref":"url","documentStore":{"store":{"./":["introduct","jdbc","为什么需要分库分表","分库分表产生的问题","分库分表的中间件","分库分表的方案","推荐当当网开源的shard"],"why/":["为什么要分表","分库分表的目的在于：减少数据库的负担，缩短数据库的响应时间。","当表的数据达到几千万时。写入和查询所花的时间会变多。"],"how/":["一个是商品的基本信息表。一个是商品详情页的表。","一个系统中不同业务拆分成不同的数据库","一方面是冷热数据、长度较大的字段。","但是这些表还是在一个数据库中。数据库级别的操作还是存在io瓶颈","例子：","例子：电商体系中的商品表拆分为两个表。","例子：电商体系中的店铺表拆分成两张表。一个是店铺基本信息相关表、一个是店铺入住审核信息表。","分库分表方案","前端装修数据库","另一方面是表中数据列太多拆分。","商品数据库","垂直分库","垂直分表","垂直拆分","大表拆小表，增加扩展表。","如果是因为数据多，使用水平拆分","如果是因为表多，使用垂直拆分","将单张表的数据，按照一定的规则，切分到多个数据库里面的多张表里面。","数据量巨大的单张表，按照某种规则，切分到多张表里面。","根据业务切分成不同的库","水平分库分表","水平分表","水平拆分","用户数据库","电商体系数据库按照业务分为","能够有效的缓解单个数据库的性能瓶颈。","订单数据库"],"how/problem.html":["2pc","available（基本可用）","base理论核心思想：我们无法做到强一致，但每个应用都可以根据自身的业务特点，采用适当的方式来使系统达到最终一致性","basic","cap定理一致性(consistency)","consistent（最终一致性）","eventu","findbyid","ids分布在多库多表中","mq事务消息","saga","service层组装","soft","state（软状态）","tcc","tolerance)","一般的分库分表中间件已经解决这个问题。","两阶段提交","事务模型","写的问题","分区容错性(partit","分布式事务","分库分表之后不可避免的就产生了分布式事务。","分库分表产生的问题","即使出现单个组件无法可用,操作依然可以完成","可用性(availability)","多个库结果集合并","客户端知道一系列的操作都会同时发生(生效)","常用的解决分布式事务的方案","怎么样把结果集合并返回给调用方","本地消息表","每个操作都必须以可预期的响应结束","理论","补偿事务","解决办法","解决方案","读的问题","跨库join","："],"how/middleware.html":["amoeba","hibern","jdbc","mysql","proxi","shard","template类的","分库分表的方案产品","基于hibernate框架的","基于jdbc的","基于mybatis的","基于代理方式的","当当shard","蘑菇街tshard","重写spring的ibati","阿里cobar"],"how/sharding-jdbc.html":["bonecp,","c3p0,","druid,","hibernate,","hikaricp等。","jdbc","mybatis,","spring","template或直接使用jdbc。","基于任何第三方的数据库连接池，如：dbcp,","官方demo","官方文档","当当网shard","支持任意实现jdbc规范的数据库。目前支持mysql，oracle，sqlserver和postgresql。","支持哪些","适用于任何基于java的orm框架，如：jpa,"]},"length":6},"tokenStore":{"root":{"2":{"docs":{},"p":{"docs":{},"c":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}},"docs":{},"i":{"docs":{},"n":{"docs":{},"t":{"docs":{},"r":{"docs":{},"o":{"docs":{},"d":{"docs":{},"u":{"docs":{},"c":{"docs":{},"t":{"docs":{"./":{"ref":"./","tf":10}}}}}}}}}},"d":{"docs":{},"s":{"docs":{},"分":{"docs":{},"布":{"docs":{},"在":{"docs":{},"多":{"docs":{},"库":{"docs":{},"多":{"docs":{},"表":{"docs":{},"中":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}}}},"j":{"docs":{},"d":{"docs":{},"b":{"docs":{},"c":{"docs":{"./":{"ref":"./","tf":0.16666666666666666},"how/middleware.html":{"ref":"how/middleware.html","tf":0.0625},"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":5.117647058823529}}}}}},"为":{"docs":{},"什":{"docs":{},"么":{"docs":{},"需":{"docs":{},"要":{"docs":{},"分":{"docs":{},"库":{"docs":{},"分":{"docs":{},"表":{"docs":{"./":{"ref":"./","tf":0.16666666666666666}}}}}}}},"要":{"docs":{},"分":{"docs":{},"表":{"docs":{"why/":{"ref":"why/","tf":10.333333333333334}}}}}}}},"分":{"docs":{},"库":{"docs":{},"分":{"docs":{},"表":{"docs":{},"产":{"docs":{},"生":{"docs":{},"的":{"docs":{},"问":{"docs":{},"题":{"docs":{"./":{"ref":"./","tf":0.16666666666666666},"how/problem.html":{"ref":"how/problem.html","tf":10.024390243902438}}}}}}},"的":{"docs":{},"中":{"docs":{},"间":{"docs":{},"件":{"docs":{"./":{"ref":"./","tf":0.16666666666666666}}}}},"方":{"docs":{},"案":{"docs":{"./":{"ref":"./","tf":0.16666666666666666}},"产":{"docs":{},"品":{"docs":{"how/middleware.html":{"ref":"how/middleware.html","tf":10.0625}}}}}},"目":{"docs":{},"的":{"docs":{},"在":{"docs":{},"于":{"docs":{},"：":{"docs":{},"减":{"docs":{},"少":{"docs":{},"数":{"docs":{},"据":{"docs":{},"库":{"docs":{},"的":{"docs":{},"负":{"docs":{},"担":{"docs":{},"，":{"docs":{},"缩":{"docs":{},"短":{"docs":{},"数":{"docs":{},"据":{"docs":{},"库":{"docs":{},"的":{"docs":{},"响":{"docs":{},"应":{"docs":{},"时":{"docs":{},"间":{"docs":{},"。":{"docs":{"why/":{"ref":"why/","tf":0.3333333333333333}}}}}}}}}}}}}}}}}}}}}}}}}}}},"方":{"docs":{},"案":{"docs":{"how/":{"ref":"how/","tf":10.037037037037036}}}},"之":{"docs":{},"后":{"docs":{},"不":{"docs":{},"可":{"docs":{},"避":{"docs":{},"免":{"docs":{},"的":{"docs":{},"就":{"docs":{},"产":{"docs":{},"生":{"docs":{},"了":{"docs":{},"分":{"docs":{},"布":{"docs":{},"式":{"docs":{},"事":{"docs":{},"务":{"docs":{},"。":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}}}}}}}}}}}}},"区":{"docs":{},"容":{"docs":{},"错":{"docs":{},"性":{"docs":{},"(":{"docs":{},"p":{"docs":{},"a":{"docs":{},"r":{"docs":{},"t":{"docs":{},"i":{"docs":{},"t":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}}}},"布":{"docs":{},"式":{"docs":{},"事":{"docs":{},"务":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}},"推":{"docs":{},"荐":{"docs":{},"当":{"docs":{},"当":{"docs":{},"网":{"docs":{},"开":{"docs":{},"源":{"docs":{},"的":{"docs":{},"s":{"docs":{},"h":{"docs":{},"a":{"docs":{},"r":{"docs":{},"d":{"docs":{"./":{"ref":"./","tf":0.16666666666666666}}}}}}}}}}}}}}},"当":{"docs":{},"表":{"docs":{},"的":{"docs":{},"数":{"docs":{},"据":{"docs":{},"达":{"docs":{},"到":{"docs":{},"几":{"docs":{},"千":{"docs":{},"万":{"docs":{},"时":{"docs":{},"。":{"docs":{},"写":{"docs":{},"入":{"docs":{},"和":{"docs":{},"查":{"docs":{},"询":{"docs":{},"所":{"docs":{},"花":{"docs":{},"的":{"docs":{},"时":{"docs":{},"间":{"docs":{},"会":{"docs":{},"变":{"docs":{},"多":{"docs":{},"。":{"docs":{"why/":{"ref":"why/","tf":0.3333333333333333}}}}}}}}}}}}}}}}}}}}}}}}}}},"当":{"docs":{},"s":{"docs":{},"h":{"docs":{},"a":{"docs":{},"r":{"docs":{},"d":{"docs":{"how/middleware.html":{"ref":"how/middleware.html","tf":0.0625}}}}}}},"网":{"docs":{},"s":{"docs":{},"h":{"docs":{},"a":{"docs":{},"r":{"docs":{},"d":{"docs":{"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":5.0588235294117645}}}}}}}}}},"一":{"docs":{},"个":{"docs":{},"是":{"docs":{},"商":{"docs":{},"品":{"docs":{},"的":{"docs":{},"基":{"docs":{},"本":{"docs":{},"信":{"docs":{},"息":{"docs":{},"表":{"docs":{},"。":{"docs":{},"一":{"docs":{},"个":{"docs":{},"是":{"docs":{},"商":{"docs":{},"品":{"docs":{},"详":{"docs":{},"情":{"docs":{},"页":{"docs":{},"的":{"docs":{},"表":{"docs":{},"。":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}}}}}}}}}}}}}}}},"系":{"docs":{},"统":{"docs":{},"中":{"docs":{},"不":{"docs":{},"同":{"docs":{},"业":{"docs":{},"务":{"docs":{},"拆":{"docs":{},"分":{"docs":{},"成":{"docs":{},"不":{"docs":{},"同":{"docs":{},"的":{"docs":{},"数":{"docs":{},"据":{"docs":{},"库":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}}}}}}}}}}}},"方":{"docs":{},"面":{"docs":{},"是":{"docs":{},"冷":{"docs":{},"热":{"docs":{},"数":{"docs":{},"据":{"docs":{},"、":{"docs":{},"长":{"docs":{},"度":{"docs":{},"较":{"docs":{},"大":{"docs":{},"的":{"docs":{},"字":{"docs":{},"段":{"docs":{},"。":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}}}}}}}}}}},"般":{"docs":{},"的":{"docs":{},"分":{"docs":{},"库":{"docs":{},"分":{"docs":{},"表":{"docs":{},"中":{"docs":{},"间":{"docs":{},"件":{"docs":{},"已":{"docs":{},"经":{"docs":{},"解":{"docs":{},"决":{"docs":{},"这":{"docs":{},"个":{"docs":{},"问":{"docs":{},"题":{"docs":{},"。":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}}}}}}}}}}}},"但":{"docs":{},"是":{"docs":{},"这":{"docs":{},"些":{"docs":{},"表":{"docs":{},"还":{"docs":{},"是":{"docs":{},"在":{"docs":{},"一":{"docs":{},"个":{"docs":{},"数":{"docs":{},"据":{"docs":{},"库":{"docs":{},"中":{"docs":{},"。":{"docs":{},"数":{"docs":{},"据":{"docs":{},"库":{"docs":{},"级":{"docs":{},"别":{"docs":{},"的":{"docs":{},"操":{"docs":{},"作":{"docs":{},"还":{"docs":{},"是":{"docs":{},"存":{"docs":{},"在":{"docs":{},"i":{"docs":{},"o":{"docs":{},"瓶":{"docs":{},"颈":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"例":{"docs":{},"子":{"docs":{},"：":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}},"电":{"docs":{},"商":{"docs":{},"体":{"docs":{},"系":{"docs":{},"中":{"docs":{},"的":{"docs":{},"商":{"docs":{},"品":{"docs":{},"表":{"docs":{},"拆":{"docs":{},"分":{"docs":{},"为":{"docs":{},"两":{"docs":{},"个":{"docs":{},"表":{"docs":{},"。":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}}}}},"店":{"docs":{},"铺":{"docs":{},"表":{"docs":{},"拆":{"docs":{},"分":{"docs":{},"成":{"docs":{},"两":{"docs":{},"张":{"docs":{},"表":{"docs":{},"。":{"docs":{},"一":{"docs":{},"个":{"docs":{},"是":{"docs":{},"店":{"docs":{},"铺":{"docs":{},"基":{"docs":{},"本":{"docs":{},"信":{"docs":{},"息":{"docs":{},"相":{"docs":{},"关":{"docs":{},"表":{"docs":{},"、":{"docs":{},"一":{"docs":{},"个":{"docs":{},"是":{"docs":{},"店":{"docs":{},"铺":{"docs":{},"入":{"docs":{},"住":{"docs":{},"审":{"docs":{},"核":{"docs":{},"信":{"docs":{},"息":{"docs":{},"表":{"docs":{},"。":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"前":{"docs":{},"端":{"docs":{},"装":{"docs":{},"修":{"docs":{},"数":{"docs":{},"据":{"docs":{},"库":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}},"另":{"docs":{},"一":{"docs":{},"方":{"docs":{},"面":{"docs":{},"是":{"docs":{},"表":{"docs":{},"中":{"docs":{},"数":{"docs":{},"据":{"docs":{},"列":{"docs":{},"太":{"docs":{},"多":{"docs":{},"拆":{"docs":{},"分":{"docs":{},"。":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}}}}}}}}}},"商":{"docs":{},"品":{"docs":{},"数":{"docs":{},"据":{"docs":{},"库":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}},"垂":{"docs":{},"直":{"docs":{},"分":{"docs":{},"库":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}},"表":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}},"拆":{"docs":{},"分":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}},"大":{"docs":{},"表":{"docs":{},"拆":{"docs":{},"小":{"docs":{},"表":{"docs":{},"，":{"docs":{},"增":{"docs":{},"加":{"docs":{},"扩":{"docs":{},"展":{"docs":{},"表":{"docs":{},"。":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}}}}}}},"如":{"docs":{},"果":{"docs":{},"是":{"docs":{},"因":{"docs":{},"为":{"docs":{},"数":{"docs":{},"据":{"docs":{},"多":{"docs":{},"，":{"docs":{},"使":{"docs":{},"用":{"docs":{},"水":{"docs":{},"平":{"docs":{},"拆":{"docs":{},"分":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}}}}},"表":{"docs":{},"多":{"docs":{},"，":{"docs":{},"使":{"docs":{},"用":{"docs":{},"垂":{"docs":{},"直":{"docs":{},"拆":{"docs":{},"分":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}}}}}}}}},"将":{"docs":{},"单":{"docs":{},"张":{"docs":{},"表":{"docs":{},"的":{"docs":{},"数":{"docs":{},"据":{"docs":{},"，":{"docs":{},"按":{"docs":{},"照":{"docs":{},"一":{"docs":{},"定":{"docs":{},"的":{"docs":{},"规":{"docs":{},"则":{"docs":{},"，":{"docs":{},"切":{"docs":{},"分":{"docs":{},"到":{"docs":{},"多":{"docs":{},"个":{"docs":{},"数":{"docs":{},"据":{"docs":{},"库":{"docs":{},"里":{"docs":{},"面":{"docs":{},"的":{"docs":{},"多":{"docs":{},"张":{"docs":{},"表":{"docs":{},"里":{"docs":{},"面":{"docs":{},"。":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"数":{"docs":{},"据":{"docs":{},"量":{"docs":{},"巨":{"docs":{},"大":{"docs":{},"的":{"docs":{},"单":{"docs":{},"张":{"docs":{},"表":{"docs":{},"，":{"docs":{},"按":{"docs":{},"照":{"docs":{},"某":{"docs":{},"种":{"docs":{},"规":{"docs":{},"则":{"docs":{},"，":{"docs":{},"切":{"docs":{},"分":{"docs":{},"到":{"docs":{},"多":{"docs":{},"张":{"docs":{},"表":{"docs":{},"里":{"docs":{},"面":{"docs":{},"。":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}}}}}}}}}}}}}}}}}}}}},"根":{"docs":{},"据":{"docs":{},"业":{"docs":{},"务":{"docs":{},"切":{"docs":{},"分":{"docs":{},"成":{"docs":{},"不":{"docs":{},"同":{"docs":{},"的":{"docs":{},"库":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}}}}}},"水":{"docs":{},"平":{"docs":{},"分":{"docs":{},"库":{"docs":{},"分":{"docs":{},"表":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}},"表":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}},"拆":{"docs":{},"分":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}},"用":{"docs":{},"户":{"docs":{},"数":{"docs":{},"据":{"docs":{},"库":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}},"电":{"docs":{},"商":{"docs":{},"体":{"docs":{},"系":{"docs":{},"数":{"docs":{},"据":{"docs":{},"库":{"docs":{},"按":{"docs":{},"照":{"docs":{},"业":{"docs":{},"务":{"docs":{},"分":{"docs":{},"为":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}}}}}}}},"能":{"docs":{},"够":{"docs":{},"有":{"docs":{},"效":{"docs":{},"的":{"docs":{},"缓":{"docs":{},"解":{"docs":{},"单":{"docs":{},"个":{"docs":{},"数":{"docs":{},"据":{"docs":{},"库":{"docs":{},"的":{"docs":{},"性":{"docs":{},"能":{"docs":{},"瓶":{"docs":{},"颈":{"docs":{},"。":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}}}}}}}}}}}}}}},"订":{"docs":{},"单":{"docs":{},"数":{"docs":{},"据":{"docs":{},"库":{"docs":{"how/":{"ref":"how/","tf":0.037037037037037035}}}}}}},"a":{"docs":{},"v":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{},"a":{"docs":{},"b":{"docs":{},"l":{"docs":{},"e":{"docs":{},"（":{"docs":{},"基":{"docs":{},"本":{"docs":{},"可":{"docs":{},"用":{"docs":{},"）":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}}}}}}},"m":{"docs":{},"o":{"docs":{},"e":{"docs":{},"b":{"docs":{},"a":{"docs":{"how/middleware.html":{"ref":"how/middleware.html","tf":0.0625}}}}}}}},"b":{"docs":{},"a":{"docs":{},"s":{"docs":{},"e":{"docs":{},"理":{"docs":{},"论":{"docs":{},"核":{"docs":{},"心":{"docs":{},"思":{"docs":{},"想":{"docs":{},"：":{"docs":{},"我":{"docs":{},"们":{"docs":{},"无":{"docs":{},"法":{"docs":{},"做":{"docs":{},"到":{"docs":{},"强":{"docs":{},"一":{"docs":{},"致":{"docs":{},"，":{"docs":{},"但":{"docs":{},"每":{"docs":{},"个":{"docs":{},"应":{"docs":{},"用":{"docs":{},"都":{"docs":{},"可":{"docs":{},"以":{"docs":{},"根":{"docs":{},"据":{"docs":{},"自":{"docs":{},"身":{"docs":{},"的":{"docs":{},"业":{"docs":{},"务":{"docs":{},"特":{"docs":{},"点":{"docs":{},"，":{"docs":{},"采":{"docs":{},"用":{"docs":{},"适":{"docs":{},"当":{"docs":{},"的":{"docs":{},"方":{"docs":{},"式":{"docs":{},"来":{"docs":{},"使":{"docs":{},"系":{"docs":{},"统":{"docs":{},"达":{"docs":{},"到":{"docs":{},"最":{"docs":{},"终":{"docs":{},"一":{"docs":{},"致":{"docs":{},"性":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"i":{"docs":{},"c":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}},"o":{"docs":{},"n":{"docs":{},"e":{"docs":{},"c":{"docs":{},"p":{"docs":{},",":{"docs":{"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":0.058823529411764705}}}}}}}}},"c":{"3":{"docs":{},"p":{"0":{"docs":{},",":{"docs":{"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":0.058823529411764705}}}},"docs":{}}},"docs":{},"a":{"docs":{},"p":{"docs":{},"定":{"docs":{},"理":{"docs":{},"一":{"docs":{},"致":{"docs":{},"性":{"docs":{},"(":{"docs":{},"c":{"docs":{},"o":{"docs":{},"n":{"docs":{},"s":{"docs":{},"i":{"docs":{},"s":{"docs":{},"t":{"docs":{},"e":{"docs":{},"n":{"docs":{},"c":{"docs":{},"y":{"docs":{},")":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}}}}}}}}}}}}},"o":{"docs":{},"n":{"docs":{},"s":{"docs":{},"i":{"docs":{},"s":{"docs":{},"t":{"docs":{},"e":{"docs":{},"n":{"docs":{},"t":{"docs":{},"（":{"docs":{},"最":{"docs":{},"终":{"docs":{},"一":{"docs":{},"致":{"docs":{},"性":{"docs":{},"）":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}}}}}}}}}},"e":{"docs":{},"v":{"docs":{},"e":{"docs":{},"n":{"docs":{},"t":{"docs":{},"u":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}},"f":{"docs":{},"i":{"docs":{},"n":{"docs":{},"d":{"docs":{},"b":{"docs":{},"y":{"docs":{},"i":{"docs":{},"d":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}},"m":{"docs":{},"q":{"docs":{},"事":{"docs":{},"务":{"docs":{},"消":{"docs":{},"息":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}},"y":{"docs":{},"s":{"docs":{},"q":{"docs":{},"l":{"docs":{"how/middleware.html":{"ref":"how/middleware.html","tf":0.0625}}}}},"b":{"docs":{},"a":{"docs":{},"t":{"docs":{},"i":{"docs":{},"s":{"docs":{},",":{"docs":{"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":0.058823529411764705}}}}}}}}}},"s":{"docs":{},"a":{"docs":{},"g":{"docs":{},"a":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}},"e":{"docs":{},"r":{"docs":{},"v":{"docs":{},"i":{"docs":{},"c":{"docs":{},"e":{"docs":{},"层":{"docs":{},"组":{"docs":{},"装":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}},"o":{"docs":{},"f":{"docs":{},"t":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}},"t":{"docs":{},"a":{"docs":{},"t":{"docs":{},"e":{"docs":{},"（":{"docs":{},"软":{"docs":{},"状":{"docs":{},"态":{"docs":{},"）":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}},"h":{"docs":{},"a":{"docs":{},"r":{"docs":{},"d":{"docs":{"how/middleware.html":{"ref":"how/middleware.html","tf":0.0625}}}}}},"p":{"docs":{},"r":{"docs":{},"i":{"docs":{},"n":{"docs":{},"g":{"docs":{"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":0.058823529411764705}}}}}}}},"t":{"docs":{},"c":{"docs":{},"c":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}},"o":{"docs":{},"l":{"docs":{},"e":{"docs":{},"r":{"docs":{},"a":{"docs":{},"n":{"docs":{},"c":{"docs":{},"e":{"docs":{},")":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}},"e":{"docs":{},"m":{"docs":{},"p":{"docs":{},"l":{"docs":{},"a":{"docs":{},"t":{"docs":{},"e":{"docs":{},"类":{"docs":{},"的":{"docs":{"how/middleware.html":{"ref":"how/middleware.html","tf":0.0625}}}},"或":{"docs":{},"直":{"docs":{},"接":{"docs":{},"使":{"docs":{},"用":{"docs":{},"j":{"docs":{},"d":{"docs":{},"b":{"docs":{},"c":{"docs":{},"。":{"docs":{"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":0.058823529411764705}}}}}}}}}}}}}}}}}}}},"两":{"docs":{},"阶":{"docs":{},"段":{"docs":{},"提":{"docs":{},"交":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}},"事":{"docs":{},"务":{"docs":{},"模":{"docs":{},"型":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}},"写":{"docs":{},"的":{"docs":{},"问":{"docs":{},"题":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}},"即":{"docs":{},"使":{"docs":{},"出":{"docs":{},"现":{"docs":{},"单":{"docs":{},"个":{"docs":{},"组":{"docs":{},"件":{"docs":{},"无":{"docs":{},"法":{"docs":{},"可":{"docs":{},"用":{"docs":{},",":{"docs":{},"操":{"docs":{},"作":{"docs":{},"依":{"docs":{},"然":{"docs":{},"可":{"docs":{},"以":{"docs":{},"完":{"docs":{},"成":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}}}}}}}}}}}}}},"可":{"docs":{},"用":{"docs":{},"性":{"docs":{},"(":{"docs":{},"a":{"docs":{},"v":{"docs":{},"a":{"docs":{},"i":{"docs":{},"l":{"docs":{},"a":{"docs":{},"b":{"docs":{},"i":{"docs":{},"l":{"docs":{},"i":{"docs":{},"t":{"docs":{},"y":{"docs":{},")":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}}}}}}}}}},"多":{"docs":{},"个":{"docs":{},"库":{"docs":{},"结":{"docs":{},"果":{"docs":{},"集":{"docs":{},"合":{"docs":{},"并":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}},"客":{"docs":{},"户":{"docs":{},"端":{"docs":{},"知":{"docs":{},"道":{"docs":{},"一":{"docs":{},"系":{"docs":{},"列":{"docs":{},"的":{"docs":{},"操":{"docs":{},"作":{"docs":{},"都":{"docs":{},"会":{"docs":{},"同":{"docs":{},"时":{"docs":{},"发":{"docs":{},"生":{"docs":{},"(":{"docs":{},"生":{"docs":{},"效":{"docs":{},")":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}}}}}}}}}}}}}},"常":{"docs":{},"用":{"docs":{},"的":{"docs":{},"解":{"docs":{},"决":{"docs":{},"分":{"docs":{},"布":{"docs":{},"式":{"docs":{},"事":{"docs":{},"务":{"docs":{},"的":{"docs":{},"方":{"docs":{},"案":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}}}}}},"怎":{"docs":{},"么":{"docs":{},"样":{"docs":{},"把":{"docs":{},"结":{"docs":{},"果":{"docs":{},"集":{"docs":{},"合":{"docs":{},"并":{"docs":{},"返":{"docs":{},"回":{"docs":{},"给":{"docs":{},"调":{"docs":{},"用":{"docs":{},"方":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}}}}}}}},"本":{"docs":{},"地":{"docs":{},"消":{"docs":{},"息":{"docs":{},"表":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}},"每":{"docs":{},"个":{"docs":{},"操":{"docs":{},"作":{"docs":{},"都":{"docs":{},"必":{"docs":{},"须":{"docs":{},"以":{"docs":{},"可":{"docs":{},"预":{"docs":{},"期":{"docs":{},"的":{"docs":{},"响":{"docs":{},"应":{"docs":{},"结":{"docs":{},"束":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}}}}}}}}}}}},"理":{"docs":{},"论":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}},"补":{"docs":{},"偿":{"docs":{},"事":{"docs":{},"务":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}},"解":{"docs":{},"决":{"docs":{},"办":{"docs":{},"法":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}},"方":{"docs":{},"案":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}},"读":{"docs":{},"的":{"docs":{},"问":{"docs":{},"题":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}},"跨":{"docs":{},"库":{"docs":{},"j":{"docs":{},"o":{"docs":{},"i":{"docs":{},"n":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.024390243902439025}}}}}}}},"：":{"docs":{"how/problem.html":{"ref":"how/problem.html","tf":0.07317073170731707}}},"h":{"docs":{},"i":{"docs":{},"b":{"docs":{},"e":{"docs":{},"r":{"docs":{},"n":{"docs":{"how/middleware.html":{"ref":"how/middleware.html","tf":0.0625}},"a":{"docs":{},"t":{"docs":{},"e":{"docs":{},",":{"docs":{"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":0.058823529411764705}}}}}}}}}},"k":{"docs":{},"a":{"docs":{},"r":{"docs":{},"i":{"docs":{},"c":{"docs":{},"p":{"docs":{},"等":{"docs":{},"。":{"docs":{"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":0.058823529411764705}}}}}}}}}}}},"p":{"docs":{},"r":{"docs":{},"o":{"docs":{},"x":{"docs":{},"i":{"docs":{"how/middleware.html":{"ref":"how/middleware.html","tf":0.0625}}}}}}},"基":{"docs":{},"于":{"docs":{},"h":{"docs":{},"i":{"docs":{},"b":{"docs":{},"e":{"docs":{},"r":{"docs":{},"n":{"docs":{},"a":{"docs":{},"t":{"docs":{},"e":{"docs":{},"框":{"docs":{},"架":{"docs":{},"的":{"docs":{"how/middleware.html":{"ref":"how/middleware.html","tf":0.0625}}}}}}}}}}}}}},"j":{"docs":{},"d":{"docs":{},"b":{"docs":{},"c":{"docs":{},"的":{"docs":{"how/middleware.html":{"ref":"how/middleware.html","tf":0.0625}}}}}}},"m":{"docs":{},"y":{"docs":{},"b":{"docs":{},"a":{"docs":{},"t":{"docs":{},"i":{"docs":{},"s":{"docs":{},"的":{"docs":{"how/middleware.html":{"ref":"how/middleware.html","tf":0.0625}}}}}}}}}},"代":{"docs":{},"理":{"docs":{},"方":{"docs":{},"式":{"docs":{},"的":{"docs":{"how/middleware.html":{"ref":"how/middleware.html","tf":0.0625}}}}}}},"任":{"docs":{},"何":{"docs":{},"第":{"docs":{},"三":{"docs":{},"方":{"docs":{},"的":{"docs":{},"数":{"docs":{},"据":{"docs":{},"库":{"docs":{},"连":{"docs":{},"接":{"docs":{},"池":{"docs":{},"，":{"docs":{},"如":{"docs":{},"：":{"docs":{},"d":{"docs":{},"b":{"docs":{},"c":{"docs":{},"p":{"docs":{},",":{"docs":{"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":0.058823529411764705}}}}}}}}}}}}}}}}}}}}}}}},"蘑":{"docs":{},"菇":{"docs":{},"街":{"docs":{},"t":{"docs":{},"s":{"docs":{},"h":{"docs":{},"a":{"docs":{},"r":{"docs":{},"d":{"docs":{"how/middleware.html":{"ref":"how/middleware.html","tf":0.0625}}}}}}}}}}},"重":{"docs":{},"写":{"docs":{},"s":{"docs":{},"p":{"docs":{},"r":{"docs":{},"i":{"docs":{},"n":{"docs":{},"g":{"docs":{},"的":{"docs":{},"i":{"docs":{},"b":{"docs":{},"a":{"docs":{},"t":{"docs":{},"i":{"docs":{"how/middleware.html":{"ref":"how/middleware.html","tf":0.0625}}}}}}}}}}}}}}}},"阿":{"docs":{},"里":{"docs":{},"c":{"docs":{},"o":{"docs":{},"b":{"docs":{},"a":{"docs":{},"r":{"docs":{"how/middleware.html":{"ref":"how/middleware.html","tf":0.0625}}}}}}}}},"d":{"docs":{},"r":{"docs":{},"u":{"docs":{},"i":{"docs":{},"d":{"docs":{},",":{"docs":{"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":0.058823529411764705}}}}}}}},"官":{"docs":{},"方":{"docs":{},"d":{"docs":{},"e":{"docs":{},"m":{"docs":{},"o":{"docs":{"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":0.058823529411764705}}}}}},"文":{"docs":{},"档":{"docs":{"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":0.058823529411764705}}}}}},"支":{"docs":{},"持":{"docs":{},"任":{"docs":{},"意":{"docs":{},"实":{"docs":{},"现":{"docs":{},"j":{"docs":{},"d":{"docs":{},"b":{"docs":{},"c":{"docs":{},"规":{"docs":{},"范":{"docs":{},"的":{"docs":{},"数":{"docs":{},"据":{"docs":{},"库":{"docs":{},"。":{"docs":{},"目":{"docs":{},"前":{"docs":{},"支":{"docs":{},"持":{"docs":{},"m":{"docs":{},"y":{"docs":{},"s":{"docs":{},"q":{"docs":{},"l":{"docs":{},"，":{"docs":{},"o":{"docs":{},"r":{"docs":{},"a":{"docs":{},"c":{"docs":{},"l":{"docs":{},"e":{"docs":{},"，":{"docs":{},"s":{"docs":{},"q":{"docs":{},"l":{"docs":{},"s":{"docs":{},"e":{"docs":{},"r":{"docs":{},"v":{"docs":{},"e":{"docs":{},"r":{"docs":{},"和":{"docs":{},"p":{"docs":{},"o":{"docs":{},"s":{"docs":{},"t":{"docs":{},"g":{"docs":{},"r":{"docs":{},"e":{"docs":{},"s":{"docs":{},"q":{"docs":{},"l":{"docs":{},"。":{"docs":{"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":0.058823529411764705}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"哪":{"docs":{},"些":{"docs":{"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":0.058823529411764705}}}}}},"适":{"docs":{},"用":{"docs":{},"于":{"docs":{},"任":{"docs":{},"何":{"docs":{},"基":{"docs":{},"于":{"docs":{},"j":{"docs":{},"a":{"docs":{},"v":{"docs":{},"a":{"docs":{},"的":{"docs":{},"o":{"docs":{},"r":{"docs":{},"m":{"docs":{},"框":{"docs":{},"架":{"docs":{},"，":{"docs":{},"如":{"docs":{},"：":{"docs":{},"j":{"docs":{},"p":{"docs":{},"a":{"docs":{},",":{"docs":{"how/sharding-jdbc.html":{"ref":"how/sharding-jdbc.html","tf":0.058823529411764705}}}}}}}}}}}}}}}}}}}}}}}}}}},"length":108},"corpusTokens":["2pc","amoeba","available（基本可用）","base理论核心思想：我们无法做到强一致，但每个应用都可以根据自身的业务特点，采用适当的方式来使系统达到最终一致性","basic","bonecp,","c3p0,","cap定理一致性(consistency)","consistent（最终一致性）","druid,","eventu","findbyid","hibern","hibernate,","hikaricp等。","ids分布在多库多表中","introduct","jdbc","mq事务消息","mybatis,","mysql","proxi","saga","service层组装","shard","soft","spring","state（软状态）","tcc","template或直接使用jdbc。","template类的","tolerance)","一个是商品的基本信息表。一个是商品详情页的表。","一个系统中不同业务拆分成不同的数据库","一方面是冷热数据、长度较大的字段。","一般的分库分表中间件已经解决这个问题。","两阶段提交","为什么要分表","为什么需要分库分表","事务模型","但是这些表还是在一个数据库中。数据库级别的操作还是存在io瓶颈","例子：","例子：电商体系中的商品表拆分为两个表。","例子：电商体系中的店铺表拆分成两张表。一个是店铺基本信息相关表、一个是店铺入住审核信息表。","写的问题","分区容错性(partit","分布式事务","分库分表之后不可避免的就产生了分布式事务。","分库分表产生的问题","分库分表方案","分库分表的中间件","分库分表的方案","分库分表的方案产品","分库分表的目的在于：减少数据库的负担，缩短数据库的响应时间。","前端装修数据库","即使出现单个组件无法可用,操作依然可以完成","另一方面是表中数据列太多拆分。","可用性(availability)","商品数据库","垂直分库","垂直分表","垂直拆分","基于hibernate框架的","基于jdbc的","基于mybatis的","基于代理方式的","基于任何第三方的数据库连接池，如：dbcp,","多个库结果集合并","大表拆小表，增加扩展表。","如果是因为数据多，使用水平拆分","如果是因为表多，使用垂直拆分","官方demo","官方文档","客户端知道一系列的操作都会同时发生(生效)","将单张表的数据，按照一定的规则，切分到多个数据库里面的多张表里面。","常用的解决分布式事务的方案","当当shard","当当网shard","当表的数据达到几千万时。写入和查询所花的时间会变多。","怎么样把结果集合并返回给调用方","推荐当当网开源的shard","支持任意实现jdbc规范的数据库。目前支持mysql，oracle，sqlserver和postgresql。","支持哪些","数据量巨大的单张表，按照某种规则，切分到多张表里面。","本地消息表","根据业务切分成不同的库","每个操作都必须以可预期的响应结束","水平分库分表","水平分表","水平拆分","理论","用户数据库","电商体系数据库按照业务分为","能够有效的缓解单个数据库的性能瓶颈。","蘑菇街tshard","补偿事务","解决办法","解决方案","订单数据库","读的问题","跨库join","适用于任何基于java的orm框架，如：jpa,","重写spring的ibati","阿里cobar","："],"pipeline":["stopWordFilter","stemmer"]},"store":{"./":{"url":"./","title":"Introduction","keywords":"","body":"为什么需要分库分表\n分库分表的方案\n分库分表产生的问题\n分库分表的中间件\n推荐当当网开源的sharding-jdbc\n"},"why/":{"url":"why/","title":"为什么要分表","keywords":"","body":"为什么要分表\n当表的数据达到几千万时。写入和查询所花的时间会变多。\n分库分表的目的在于：减少数据库的负担，缩短数据库的响应时间。\n"},"how/":{"url":"how/","title":"分库分表方案","keywords":"","body":"分库分表方案\n\n如果是因为表多，使用垂直拆分\n如果是因为数据多，使用水平拆分\n\n垂直拆分\n根据业务切分成不同的库\n垂直分表\n大表拆小表，增加扩展表。\n\n一方面是冷热数据、长度较大的字段。\n        例子：电商体系中的商品表拆分为两个表。\n        一个是商品的基本信息表。一个是商品详情页的表。\n另一方面是表中数据列太多拆分。\n        例子：电商体系中的店铺表拆分成两张表。一个是店铺基本信息相关表、一个是店铺入住审核信息表。\n垂直分库\n一个系统中不同业务拆分成不同的数据库\n例子： 电商体系数据库按照业务分为\n\n前端装修数据库\n用户数据库\n商品数据库\n订单数据库\n\n水平拆分\n水平分表\n数据量巨大的单张表，按照某种规则，切分到多张表里面。\n但是这些表还是在一个数据库中。数据库级别的操作还是存在IO瓶颈\n水平分库分表\n将单张表的数据，按照一定的规则，切分到多个数据库里面的多张表里面。\n能够有效的缓解单个数据库的性能瓶颈。\n"},"how/problem.html":{"url":"how/problem.html","title":"分库分表产生的问题","keywords":"","body":"分库分表产生的问题\n写的问题\n分布式事务\n理论\n\nCAP定理一致性(Consistency) ： 客户端知道一系列的操作都会同时发生(生效)\n可用性(Availability) ： 每个操作都必须以可预期的响应结束\n分区容错性(Partition tolerance) ： 即使出现单个组件无法可用,操作依然可以完成\n\nBASE理论核心思想：我们无法做到强一致，但每个应用都可以根据自身的业务特点，采用适当的方式来使系统达到最终一致性\nBasically Available（基本可用）\nSoft state（软状态）\nEventually consistent（最终一致性）\n\n\n分库分表之后不可避免的就产生了分布式事务。\n常用的解决分布式事务的方案\n解决方案\n\n两阶段提交 2PC\n补偿事务 TCC\n本地消息表\nMQ事务消息\nSagas 事务模型\n\n读的问题\n多个库结果集合并\nfindByIds ids分布在多库多表中 怎么样把结果集合并返回给调用方\n\n一般的分库分表中间件已经解决这个问题。\n跨库join\n解决办法\nservice层组装\n"},"how/middleware.html":{"url":"how/middleware.html","title":"分库分表的方案产品","keywords":"","body":"分库分表的方案产品\n基于代理方式的\n\nMysql Proxy\nAmoeba\n\n基于Hibernate框架的\n\nHibernate Shards\n\n基于jdbc的\n\n当当sharding-jdbc\n\n基于mybatis的\n\n蘑菇街TSharding\n\n重写spring的ibatis template类的\n\n阿里Cobar\n\n"},"how/sharding-jdbc.html":{"url":"how/sharding-jdbc.html","title":"当当网sharding-jdbc","keywords":"","body":"当当网sharding-jdbc\n官方demo\n\n官方文档\n支持哪些\n\n适用于任何基于Java的ORM框架，如：JPA, Hibernate, Mybatis, Spring JDBC Template或直接使用JDBC。\n基于任何第三方的数据库连接池，如：DBCP, C3P0, BoneCP, Druid, HikariCP等。\n支持任意实现JDBC规范的数据库。目前支持MySQL，Oracle，SQLServer和PostgreSQL。\n\n"}}}